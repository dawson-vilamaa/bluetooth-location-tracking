[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar meteorInstall = Package.modules.meteorInstall;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Template = Package['templating-runtime'].Template;\nvar Promise = Package.promise.Promise;\nvar HTML = Package.htmljs.HTML;\nvar Spacebars = Package.spacebars.Spacebars;\n\nvar require = meteorInstall({\"node_modules\":{\"meteor\":{\"blaze-hot\":{\"hot.js\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// packages/blaze-hot/hot.js                                                                                         //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n!function (module1) {\n  let Blaze;\n  module1.link(\"meteor/blaze\", {\n    Blaze(v) {\n      Blaze = v;\n    }\n\n  }, 0);\n  let Templates;\n  module1.link(\"meteor/templating-runtime\", {\n    Template(v) {\n      Templates = v;\n    }\n\n  }, 1);\n  let UpdateAll;\n  module1.link(\"./update-templates.js\", {\n    UpdateAll(v) {\n      UpdateAll = v;\n    }\n\n  }, 2);\n\n  ___INIT_METEOR_FAST_REFRESH(module);\n\n  let importedTemplating = new WeakMap();\n  let currentModule = {\n    id: null\n  };\n  const SourceModule = Symbol();\n\n  function patchTemplate(Template) {\n    const oldRegisterHelper = Template.registerHelper;\n\n    Template.registerHelper = function (name, func) {\n      func[SourceModule] = currentModule.id;\n      oldRegisterHelper(name, func);\n    };\n\n    const oldOnCreated = Template.prototype.onCreated;\n\n    Template.prototype.onCreated = function (cb) {\n      if (cb) {\n        cb[SourceModule] = currentModule.id;\n      }\n\n      return oldOnCreated.call(this, cb);\n    };\n\n    const oldOnRendered = Template.prototype.onRendered;\n\n    Template.prototype.onRendered = function (cb) {\n      if (cb) {\n        cb[SourceModule] = currentModule.id;\n      }\n\n      return oldOnRendered.call(this, cb);\n    };\n\n    const oldOnDestroyed = Template.prototype.onDestroyed;\n\n    Template.prototype.onDestroyed = function (cb) {\n      if (cb) {\n        cb[SourceModule] = currentModule.id;\n      }\n\n      return oldOnDestroyed.call(this, cb);\n    };\n\n    const oldHelpers = Template.prototype.helpers;\n\n    Template.prototype.helpers = function (dict) {\n      if (typeof dict === 'object') {\n        for (var k in dict) {\n          if (dict[k]) {\n            dict[k][SourceModule] = currentModule.id;\n          }\n        }\n      }\n\n      return oldHelpers.call(this, dict);\n    };\n\n    const oldEvents = Template.prototype.events;\n\n    Template.prototype.events = function (eventMap) {\n      const result = oldEvents.call(this, eventMap);\n      this.__eventMaps[this.__eventMaps.length - 1][SourceModule] = currentModule.id;\n      return result;\n    };\n  }\n\n  function cleanTemplate(template, moduleId) {\n    let usedModule = false;\n\n    if (!template || !Blaze.isTemplate(template)) {\n      return usedModule;\n    }\n\n    function cleanArray(array) {\n      for (let i = array.length - 1; i >= 0; i--) {\n        let item = array[i];\n\n        if (item && item[SourceModule] === moduleId) {\n          usedModule = true;\n          array.splice(i, 1);\n        }\n      }\n    }\n\n    cleanArray(template._callbacks.created);\n    cleanArray(template._callbacks.rendered);\n    cleanArray(template._callbacks.destroyed);\n    cleanArray(template.__eventMaps);\n    Object.keys(template.__helpers).forEach(key => {\n      if (template.__helpers[key] && template.__helpers[key][SourceModule] === moduleId) {\n        usedModule = true;\n        delete template.__helpers[key];\n      }\n    });\n    return usedModule;\n  }\n\n  function shouldAccept(module) {\n    if (!importedTemplating.get(module)) {\n      return false;\n    }\n\n    if (!module.exports) {\n      return true;\n    }\n\n    return Object.keys(module.exports).filter(key => key !== '__esModule').length === 0;\n  }\n\n  if (module.hot) {\n    patchTemplate(Blaze.Template);\n    module.hot.onRequire({\n      before(module) {\n        if (module.id === '/node_modules/meteor/blaze.js' || module.id === '/node_modules/meteor/templating.js') {\n          importedTemplating.set(currentModule, true);\n        }\n\n        let previousModule = currentModule;\n        currentModule = module;\n        return previousModule;\n      },\n\n      after(module, previousModule) {\n        if (shouldAccept(module)) {\n          module.hot.accept();\n          module.hot.dispose(() => {\n            Object.keys(Templates).forEach(templateName => {\n              let template = Templates[templateName];\n              let usedByModule = cleanTemplate(template, module.id);\n\n              if (usedByModule) {\n                Template._applyHmrChanges(templateName);\n              }\n            });\n            Object.values(Blaze._globalHelpers).forEach(helper => {\n              if (helper && helper[SourceModule] === module.id) {\n                Template._applyHmrChanges(UpdateAll);\n              }\n            });\n          });\n        }\n\n        currentModule = previousModule;\n      }\n\n    });\n  }\n}.call(this, module);\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n},\"update-templates.js\":function module(require,exports,module){\n\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                   //\n// packages/blaze-hot/update-templates.js                                                                            //\n//                                                                                                                   //\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                     //\n!function (module1) {\n  module1.export({\n    UpdateAll: () => UpdateAll\n  });\n\n  ___INIT_METEOR_FAST_REFRESH(module);\n\n  const UpdateAll = Symbol('update all templates');\n  let renderedTemplates = {};\n  let overrideTemplateContentBlock = null;\n  let overrideTemplateElseBlock = null;\n  const oldConstructView = Template.prototype.constructView;\n\n  Template.prototype.constructView = function () {\n    let view = oldConstructView.apply(this, arguments);\n    let templateName = this.viewName;\n    view.onViewCreated(function () {\n      renderedTemplates[templateName] = renderedTemplates[templateName] || [];\n      renderedTemplates[templateName].push(view);\n    });\n    view.onViewDestroyed(function () {\n      const index = renderedTemplates[templateName].indexOf(view);\n\n      if (index > -1) {\n        renderedTemplates[templateName].splice(index, 1);\n      }\n    });\n\n    if (overrideTemplateContentBlock) {\n      view.templateContentBlock = overrideTemplateContentBlock;\n      overrideTemplateContentBlock = null;\n    }\n\n    if (overrideTemplateElseBlock) {\n      view.templateElseBlock = overrideTemplateElseBlock;\n      overrideTemplateElseBlock = null;\n    }\n\n    return view;\n  };\n\n  let updateRootViews = Template._applyHmrChanges;\n  let timeout = null;\n  let lastUpdateFailed = false;\n  let modifiedTemplates = new Set();\n  let templateViewPrefix = 'Template.'; // Overrides the default _applyHmrChanges with one that updates the specific\n  // views for modified templates instead of updating everything.\n\n  Template._applyHmrChanges = function () {\n    let templateName = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : UpdateAll;\n\n    if (templateName === UpdateAll || lastUpdateFailed) {\n      lastUpdateFailed = false;\n      clearTimeout(timeout);\n      updateRootViews();\n      return;\n    } else {\n      modifiedTemplates.add(templateName);\n    }\n\n    if (timeout) {\n      return;\n    }\n\n    timeout = setTimeout(() => {\n      for (var i = 0; i < Template.__pendingReplacement.length; i++) {\n        delete Template[Template.__pendingReplacement[i]];\n      }\n\n      Template.__pendingReplacement = [];\n      timeout = null;\n      modifiedTemplates.forEach(templateName => {\n        modifiedTemplates.delete(templateName);\n        let viewName = templateName;\n\n        if (!(viewName in renderedTemplates)) {\n          viewName = templateViewPrefix + viewName;\n        } else {\n          console.error('[Blaze HMR] Error: view name does not start with Template');\n          return;\n        }\n\n        if (!(viewName in renderedTemplates)) {\n          return;\n        }\n\n        let views = renderedTemplates[viewName];\n        renderedTemplates[viewName] = [];\n\n        while (views.length > 0) {\n          let view = views.pop(); // find first parent template that isn't a content block\n\n          while (!view.template || view.templateContentBlock || view.templateElseBlock) {\n            if (!view.parentView) {\n              console.log('[Blaze HMR] Unable to update template', viewName);\n              return;\n            }\n\n            view = view.parentView;\n          }\n\n          if (!view.isRendered) {\n            continue;\n          } // TODO: this can be removed if we don't update a view, and then update\n          // one of its children (we only need to update the parent).\n\n\n          Package.tracker.Tracker.flush();\n          let parent = view.parentView;\n          let parentElement = view._domrange.parentElement;\n\n          let next = view._domrange.lastNode().nextSibling;\n\n          let nextComment = null;\n\n          if (!next) {\n            // percolate:momentum requires a next node to show the new nodes\n            next = nextComment = document.createComment('Blaze HMR Placeholder');\n            parentElement.insertBefore(nextComment, null);\n          }\n\n          if (!parent) {\n            // TODO: we only need to update a single root view\n            return updateRootViews();\n          }\n\n          if (view.templateContentBlock) {\n            overrideTemplateContentBlock = view.templateContentBlock;\n          }\n\n          if (view.templateElseBlock) {\n            overrideTemplateElseBlock = view.templateElseBlock;\n          } // Since there is a parent range, Blaze will not automatically\n          // detach the dom range.\n\n\n          view._domrange.detach();\n\n          view._domrange.destroy();\n\n          let newView;\n\n          try {\n            newView = Blaze.render(Template[view.template.viewName.slice('Template.'.length)], parentElement, next, parent);\n          } catch (error) {\n            console.log('[Blaze HMR] Error re-rending template:');\n            console.error(error);\n            lastUpdateFailed = true;\n          }\n\n          let index = parent._domrange.members.findIndex(member => {\n            return member && member.view === view;\n          });\n\n          if (newView) {\n            parent._domrange.members.splice(index, 1, newView._domrange);\n          } else {\n            parent._domrange.members.splice(index, 1);\n          }\n\n          if (nextComment) {\n            parentElement.removeChild(nextComment);\n          }\n        }\n      });\n    });\n  };\n}.call(this, module);\n///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}}}}},{\n  \"extensions\": [\n    \".js\",\n    \".json\"\n  ]\n});\n\nrequire(\"/node_modules/meteor/blaze-hot/hot.js\");\nrequire(\"/node_modules/meteor/blaze-hot/update-templates.js\");\n\n/* Exports */\nPackage._define(\"blaze-hot\");\n\n})();\n","servePath":"/packages/blaze-hot.js","sourceMap":{"version":3,"sources":["packages/blaze-hot/hot.js","packages/blaze-hot/update-templates.js"],"names":["importedTemplating","WeakMap","currentModule","id","SourceModule","Symbol","patchTemplate","Template","oldRegisterHelper","registerHelper","name","func","oldOnCreated","prototype","onCreated","cb","call","oldOnRendered","onRendered","oldOnDestroyed","onDestroyed","oldHelpers","helpers","dict","k","oldEvents","events","eventMap","result","__eventMaps","length","cleanTemplate","template","moduleId","usedModule","Blaze","isTemplate","cleanArray","array","i","item","splice","_callbacks","created","rendered","destroyed","Object","keys","__helpers","forEach","key","shouldAccept","module","get","exports","filter","hot","onRequire","before","set","previousModule","after","accept","dispose","Templates","templateName","usedByModule","_applyHmrChanges","values","_globalHelpers","helper","UpdateAll","renderedTemplates","overrideTemplateContentBlock","overrideTemplateElseBlock","oldConstructView","constructView","view","apply","arguments","viewName","onViewCreated","push","onViewDestroyed","index","indexOf","templateContentBlock","templateElseBlock","updateRootViews","timeout","lastUpdateFailed","modifiedTemplates","Set","templateViewPrefix","clearTimeout","add","setTimeout","__pendingReplacement","delete","console","error","views","pop","parentView","log","isRendered","Package","tracker","Tracker","flush","parent","parentElement","_domrange","next","lastNode","nextSibling","nextComment","document","createComment","insertBefore","detach","destroy","newView","render","slice","members","findIndex","member","removeChild"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA,MAAIA,kBAAkB,GAAG,IAAIC,OAAJ,EAAzB;AACA,MAAIC,aAAa,GAAG;AAACC,MAAE,EAAE;AAAL,GAApB;AACA,QAAMC,YAAY,GAAGC,MAAM,EAA3B;;AAEA,WAASC,aAAT,CAAuBC,QAAvB,EAAiC;AAC/B,UAAMC,iBAAiB,GAAGD,QAAQ,CAACE,cAAnC;;AACAF,YAAQ,CAACE,cAATF,GAA0B,UAAUG,IAAV,EAAgBC,IAAhB,EAAsB;AAC9CA,UAAI,CAACP,YAAD,CAAJO,GAAqBT,aAAa,CAACC,EAAnCQ;AACAH,uBAAiB,CAACE,IAAD,EAAOC,IAAP,CAAjBH;AAFF;;AAKA,UAAMI,YAAY,GAAGL,QAAQ,CAACM,SAATN,CAAmBO,SAAxC;;AACAP,YAAQ,CAACM,SAATN,CAAmBO,SAAnBP,GAA+B,UAAUQ,EAAV,EAAc;AAC3C,UAAIA,EAAJ,EAAQ;AACNA,UAAE,CAACX,YAAD,CAAFW,GAAmBb,aAAa,CAACC,EAAjCY;AACD;;AAED,aAAOH,YAAY,CAACI,IAAbJ,CAAkB,IAAlBA,EAAwBG,EAAxBH,CAAP;AALF;;AAQA,UAAMK,aAAa,GAAGV,QAAQ,CAACM,SAATN,CAAmBW,UAAzC;;AACAX,YAAQ,CAACM,SAATN,CAAmBW,UAAnBX,GAAgC,UAAUQ,EAAV,EAAc;AAC5C,UAAIA,EAAJ,EAAQ;AACNA,UAAE,CAACX,YAAD,CAAFW,GAAmBb,aAAa,CAACC,EAAjCY;AACD;;AAED,aAAOE,aAAa,CAACD,IAAdC,CAAmB,IAAnBA,EAAyBF,EAAzBE,CAAP;AALF;;AAQA,UAAME,cAAc,GAAGZ,QAAQ,CAACM,SAATN,CAAmBa,WAA1C;;AACAb,YAAQ,CAACM,SAATN,CAAmBa,WAAnBb,GAAiC,UAAUQ,EAAV,EAAc;AAC7C,UAAIA,EAAJ,EAAQ;AACNA,UAAE,CAACX,YAAD,CAAFW,GAAmBb,aAAa,CAACC,EAAjCY;AACD;;AAED,aAAOI,cAAc,CAACH,IAAfG,CAAoB,IAApBA,EAA0BJ,EAA1BI,CAAP;AALF;;AAQA,UAAME,UAAU,GAAGd,QAAQ,CAACM,SAATN,CAAmBe,OAAtC;;AACAf,YAAQ,CAACM,SAATN,CAAmBe,OAAnBf,GAA6B,UAAUgB,IAAV,EAAgB;AAC3C,UAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC5B,aAAK,IAAIC,CAAT,IAAcD,IAAd,EAAoB;AAClB,cAAIA,IAAI,CAACC,CAAD,CAAR,EAAa;AACXD,gBAAI,CAACC,CAAD,CAAJD,CAAQnB,YAARmB,IAAwBrB,aAAa,CAACC,EAAtCoB;AACD;AACF;AACF;;AAED,aAAOF,UAAU,CAACL,IAAXK,CAAgB,IAAhBA,EAAsBE,IAAtBF,CAAP;AATF;;AAYA,UAAMI,SAAS,GAAGlB,QAAQ,CAACM,SAATN,CAAmBmB,MAArC;;AACAnB,YAAQ,CAACM,SAATN,CAAmBmB,MAAnBnB,GAA4B,UAAUoB,QAAV,EAAoB;AAC9C,YAAMC,MAAM,GAAGH,SAAS,CAACT,IAAVS,CAAe,IAAfA,EAAqBE,QAArBF,CAAf;AACA,WAAKI,WAAL,CAAiB,KAAKA,WAAL,CAAiBC,MAAjB,GAA0B,CAA3C,EAA8C1B,YAA9C,IAA8DF,aAAa,CAACC,EAA5E;AACA,aAAOyB,MAAP;AAHF;AAKD;;AAED,WAASG,aAAT,CAAuBC,QAAvB,EAAiCC,QAAjC,EAA2C;AACzC,QAAIC,UAAU,GAAG,KAAjB;;AACA,QAAI,CAACF,QAAD,IAAa,CAACG,KAAK,CAACC,UAAND,CAAiBH,QAAjBG,CAAlB,EAA8C;AAC5C,aAAOD,UAAP;AACD;;AAED,aAASG,UAAT,CAAoBC,KAApB,EAA2B;AACzB,WAAK,IAAIC,CAAC,GAAGD,KAAK,CAACR,MAANQ,GAAe,CAA5B,EAA+BC,CAAC,IAAI,CAApC,EAAuCA,CAAC,EAAxC,EAA4C;AAC1C,YAAIC,IAAI,GAAGF,KAAK,CAACC,CAAD,CAAhB;;AACA,YAAIC,IAAI,IAAIA,IAAI,CAACpC,YAAD,CAAJoC,KAAuBP,QAAnC,EAA6C;AAC3CC,oBAAU,GAAG,IAAbA;AACAI,eAAK,CAACG,MAANH,CAAaC,CAAbD,EAAgB,CAAhBA;AACD;AACF;AACF;;AAEDD,cAAU,CAACL,QAAQ,CAACU,UAATV,CAAoBW,OAArB,CAAVN;AACAA,cAAU,CAACL,QAAQ,CAACU,UAATV,CAAoBY,QAArB,CAAVP;AACAA,cAAU,CAACL,QAAQ,CAACU,UAATV,CAAoBa,SAArB,CAAVR;AACAA,cAAU,CAACL,QAAQ,CAACH,WAAV,CAAVQ;AAEAS,UAAM,CAACC,IAAPD,CAAYd,QAAQ,CAACgB,SAArBF,EAAgCG,OAAhCH,CAAwCI,GAAG,IAAI;AAC7C,UAAIlB,QAAQ,CAACgB,SAAThB,CAAmBkB,GAAnBlB,KAA2BA,QAAQ,CAACgB,SAAThB,CAAmBkB,GAAnBlB,EAAwB5B,YAAxB4B,MAA0CC,QAAzE,EAAmF;AACjFC,kBAAU,GAAG,IAAbA;AACA,eAAOF,QAAQ,CAACgB,SAAThB,CAAmBkB,GAAnBlB,CAAP;AACD;AAJH;AAOA,WAAOE,UAAP;AACD;;AAED,WAASiB,YAAT,CAAsBC,MAAtB,EAA8B;AAC5B,QAAI,CAACpD,kBAAkB,CAACqD,GAAnBrD,CAAuBoD,MAAvBpD,CAAL,EAAqC;AACnC,aAAO,KAAP;AACD;;AACD,QAAI,CAACoD,MAAM,CAACE,OAAZ,EAAqB;AACnB,aAAO,IAAP;AACD;;AAED,WAAOR,MAAM,CAACC,IAAPD,CAAYM,MAAM,CAACE,OAAnBR,EAA4BS,MAA5BT,CAAmCI,GAAG,IAAIA,GAAG,KAAK,YAAlDJ,EAAgEhB,MAAhEgB,KAA2E,CAAlF;AACD;;AAED,MAAIM,MAAM,CAACI,GAAX,EAAgB;AACdlD,iBAAa,CAAC6B,KAAK,CAAC5B,QAAP,CAAbD;AACA8C,UAAM,CAACI,GAAPJ,CAAWK,SAAXL,CAAqB;AACnBM,YAAM,CAACN,MAAD,EAAS;AACb,YAAIA,MAAM,CAACjD,EAAPiD,KAAc,+BAAdA,IAAiDA,MAAM,CAACjD,EAAPiD,KAAc,oCAAnE,EAAyG;AACvGpD,4BAAkB,CAAC2D,GAAnB3D,CAAuBE,aAAvBF,EAAsC,IAAtCA;AACD;;AAED,YAAI4D,cAAc,GAAG1D,aAArB;AACAA,qBAAa,GAAGkD,MAAhBlD;AACA,eAAO0D,cAAP;AARiB;;AAUnBC,WAAK,CAACT,MAAD,EAASQ,cAAT,EAAyB;AAC5B,YAAIT,YAAY,CAACC,MAAD,CAAhB,EAA0B;AACxBA,gBAAM,CAACI,GAAPJ,CAAWU,MAAXV;AACAA,gBAAM,CAACI,GAAPJ,CAAWW,OAAXX,CAAmB,MAAM;AACvBN,kBAAM,CAACC,IAAPD,CAAYkB,SAAZlB,EAAuBG,OAAvBH,CAA+BmB,YAAY,IAAI;AAC7C,kBAAIjC,QAAQ,GAAGgC,SAAS,CAACC,YAAD,CAAxB;AACA,kBAAIC,YAAY,GAAGnC,aAAa,CAACC,QAAD,EAAWoB,MAAM,CAACjD,EAAlB,CAAhC;;AACA,kBAAI+D,YAAJ,EAAkB;AAChB3D,wBAAQ,CAAC4D,gBAAT5D,CAA0B0D,YAA1B1D;AACD;AALH;AAQAuC,kBAAM,CAACsB,MAAPtB,CAAcX,KAAK,CAACkC,cAApBvB,EAAoCG,OAApCH,CAA4CwB,MAAM,IAAI;AACpD,kBAAIA,MAAM,IAAIA,MAAM,CAAClE,YAAD,CAANkE,KAAyBlB,MAAM,CAACjD,EAA9C,EAAkD;AAChDI,wBAAQ,CAAC4D,gBAAT5D,CAA0BgE,SAA1BhE;AACD;AAHH;AATF;AAeD;;AACDL,qBAAa,GAAG0D,cAAhB1D;AACD;;AA9BkB,KAArBkD;AAgCD;;;;;;;;;;;;;;;;;;;AC3IM,QAAMmB,SAAS,GAAGlE,MAAM,CAAC,sBAAD,CAAxB;AAEP,MAAImE,iBAAiB,GAAG,EAAxB;AACA,MAAIC,4BAA4B,GAAG,IAAnC;AACA,MAAIC,yBAAyB,GAAG,IAAhC;AAEA,QAAMC,gBAAgB,GAAGpE,QAAQ,CAACM,SAATN,CAAmBqE,aAA5C;;AAEArE,UAAQ,CAACM,SAATN,CAAmBqE,aAAnBrE,GAAmC,YAAY;AAC7C,QAAIsE,IAAI,GAAGF,gBAAgB,CAACG,KAAjBH,CAAuB,IAAvBA,EAA6BI,SAA7BJ,CAAX;AACA,QAAIV,YAAY,GAAG,KAAKe,QAAxB;AAEAH,QAAI,CAACI,aAALJ,CAAmB,YAAY;AAC7BL,uBAAiB,CAACP,YAAD,CAAjBO,GAAkCA,iBAAiB,CAACP,YAAD,CAAjBO,IAAmC,EAArEA;AACAA,uBAAiB,CAACP,YAAD,CAAjBO,CAAgCU,IAAhCV,CAAqCK,IAArCL;AAFF;AAKAK,QAAI,CAACM,eAALN,CAAqB,YAAY;AAC/B,YAAMO,KAAK,GAAGZ,iBAAiB,CAACP,YAAD,CAAjBO,CAAgCa,OAAhCb,CAAwCK,IAAxCL,CAAd;;AACA,UAAIY,KAAK,GAAG,CAAC,CAAb,EAAgB;AACdZ,yBAAiB,CAACP,YAAD,CAAjBO,CAAgC/B,MAAhC+B,CAAuCY,KAAvCZ,EAA8C,CAA9CA;AACD;AAJH;;AAOA,QAAIC,4BAAJ,EAAkC;AAChCI,UAAI,CAACS,oBAALT,GAA4BJ,4BAA5BI;AACAJ,kCAA4B,GAAG,IAA/BA;AACD;;AAED,QAAIC,yBAAJ,EAA+B;AAC7BG,UAAI,CAACU,iBAALV,GAAyBH,yBAAzBG;AACAH,+BAAyB,GAAG,IAA5BA;AACD;;AAED,WAAOG,IAAP;AA1BF;;AA6BA,MAAIW,eAAe,GAAGjF,QAAQ,CAAC4D,gBAA/B;AAEA,MAAIsB,OAAO,GAAG,IAAd;AACA,MAAIC,gBAAgB,GAAG,KAAvB;AACA,MAAIC,iBAAiB,GAAG,IAAIC,GAAJ,EAAxB;AACA,MAAIC,kBAAkB,GAAG,WAAzB,C,CAEA;AACA;;AACAtF,UAAQ,CAAC4D,gBAAT5D,GAA4B,YAAoC;AAAA,QAA1B0D,YAA0B,uEAAXM,SAAW;;AAC9D,QAAIN,YAAY,KAAKM,SAAjBN,IAA8ByB,gBAAlC,EAAoD;AAClDA,sBAAgB,GAAG,KAAnBA;AACAI,kBAAY,CAACL,OAAD,CAAZK;AACAN,qBAAe;AACf;AAJF,WAKO;AACLG,uBAAiB,CAACI,GAAlBJ,CAAsB1B,YAAtB0B;AACD;;AAED,QAAIF,OAAJ,EAAa;AACX;AACD;;AAEDA,WAAO,GAAGO,UAAU,CAAC,MAAM;AACzB,WAAK,IAAIzD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGhC,QAAQ,CAAC0F,oBAAT1F,CAA8BuB,MAAlD,EAA0DS,CAAC,EAA3D,EAA+D;AAC7D,eAAOhC,QAAQ,CAACA,QAAQ,CAAC0F,oBAAT1F,CAA8BgC,CAA9BhC,CAAD,CAAf;AACD;;AAEDA,cAAQ,CAAC0F,oBAAT1F,GAAgC,EAAhCA;AAEAkF,aAAO,GAAG,IAAVA;AACAE,uBAAiB,CAAC1C,OAAlB0C,CAA0B1B,YAAY,IAAI;AACxC0B,yBAAiB,CAACO,MAAlBP,CAAyB1B,YAAzB0B;AACA,YAAIX,QAAQ,GAAGf,YAAf;;AAEA,YAAI,EAAEe,QAAQ,IAAIR,iBAAd,CAAJ,EAAsC;AACpCQ,kBAAQ,GAAGa,kBAAkB,GAAGb,QAAhCA;AADF,eAEO;AACLmB,iBAAO,CAACC,KAARD,CAAc,2DAAdA;AACA;AACD;;AAED,YAAI,EAAEnB,QAAQ,IAAIR,iBAAd,CAAJ,EAAsC;AACpC;AACD;;AAED,YAAI6B,KAAK,GAAG7B,iBAAiB,CAACQ,QAAD,CAA7B;AACAR,yBAAiB,CAACQ,QAAD,CAAjBR,GAA8B,EAA9BA;;AACA,eAAO6B,KAAK,CAACvE,MAANuE,GAAe,CAAtB,EAAyB;AACvB,cAAIxB,IAAI,GAAGwB,KAAK,CAACC,GAAND,EAAX,CADuB,CAGvB;;AACA,iBAAO,CAACxB,IAAI,CAAC7C,QAAN,IAAkB6C,IAAI,CAACS,oBAAvB,IAA+CT,IAAI,CAACU,iBAA3D,EAA8E;AAC5E,gBAAI,CAACV,IAAI,CAAC0B,UAAV,EAAsB;AACpBJ,qBAAO,CAACK,GAARL,CAAY,uCAAZA,EAAqDnB,QAArDmB;AACA;AACD;;AAEDtB,gBAAI,GAAGA,IAAI,CAAC0B,UAAZ1B;AACD;;AAED,cAAI,CAACA,IAAI,CAAC4B,UAAV,EAAsB;AACpB;AAdqB,YAiBvB;AACA;;;AACAC,iBAAO,CAACC,OAARD,CAAgBE,OAAhBF,CAAwBG,KAAxBH;AAEA,cAAII,MAAM,GAAGjC,IAAI,CAAC0B,UAAlB;AACA,cAAIQ,aAAa,GAAGlC,IAAI,CAACmC,SAALnC,CAAekC,aAAnC;;AACA,cAAIE,IAAI,GAAGpC,IAAI,CAACmC,SAALnC,CAAeqC,QAAfrC,GAA0BsC,WAArC;;AACA,cAAIC,WAAW,GAAG,IAAlB;;AAEA,cAAI,CAACH,IAAL,EAAW;AACT;AACAA,gBAAI,GAAGG,WAAW,GAAGC,QAAQ,CAACC,aAATD,CAAuB,uBAAvBA,CAArBJ;AACAF,yBAAa,CAACQ,YAAdR,CAA2BK,WAA3BL,EAAwC,IAAxCA;AACD;;AAED,cAAI,CAACD,MAAL,EAAa;AACX;AACA,mBAAOtB,eAAe,EAAtB;AACD;;AAED,cAAIX,IAAI,CAACS,oBAAT,EAA+B;AAC7Bb,wCAA4B,GAAGI,IAAI,CAACS,oBAApCb;AACD;;AACD,cAAII,IAAI,CAACU,iBAAT,EAA4B;AAC1Bb,qCAAyB,GAAGG,IAAI,CAACU,iBAAjCb;AAzCqB,YA4CvB;AACA;;;AACAG,cAAI,CAACmC,SAALnC,CAAe2C,MAAf3C;;AACAA,cAAI,CAACmC,SAALnC,CAAe4C,OAAf5C;;AACA,cAAI6C,OAAJ;;AAEA,cAAI;AACFA,mBAAO,GAAGvF,KAAK,CAACwF,MAANxF,CACR5B,QAAQ,CAACsE,IAAI,CAAC7C,QAAL6C,CAAcG,QAAdH,CAAuB+C,KAAvB/C,CAA6B,YAAY/C,MAAzC+C,CAAD,CADA1C,EAER4E,aAFQ5E,EAGR8E,IAHQ9E,EAIR2E,MAJQ3E,CAAVuF;AADF,YAOE,OAAOtB,KAAP,EAAc;AACdD,mBAAO,CAACK,GAARL,CAAY,wCAAZA;AACAA,mBAAO,CAACC,KAARD,CAAcC,KAAdD;AACAT,4BAAgB,GAAG,IAAnBA;AACD;;AAED,cAAIN,KAAK,GAAG0B,MAAM,CAACE,SAAPF,CAAiBe,OAAjBf,CAAyBgB,SAAzBhB,CAAmCiB,MAAM,IAAI;AACvD,mBAAOA,MAAM,IAAIA,MAAM,CAAClD,IAAPkD,KAAgBlD,IAAjC;AADU,YAAZ;;AAGA,cAAI6C,OAAJ,EAAa;AACXZ,kBAAM,CAACE,SAAPF,CAAiBe,OAAjBf,CAAyBrE,MAAzBqE,CAAgC1B,KAAhC0B,EAAuC,CAAvCA,EAA0CY,OAAO,CAACV,SAAlDF;AADF,iBAEO;AACLA,kBAAM,CAACE,SAAPF,CAAiBe,OAAjBf,CAAyBrE,MAAzBqE,CAAgC1B,KAAhC0B,EAAuC,CAAvCA;AACD;;AAED,cAAIM,WAAJ,EAAiB;AACfL,yBAAa,CAACiB,WAAdjB,CAA0BK,WAA1BL;AACD;AACF;AA5FH;AARkB,MAApBtB;AAdF","file":"/packages/blaze-hot.js","sourcesContent":["import { Blaze } from 'meteor/blaze';\nimport { Template as Templates} from 'meteor/templating-runtime';\nimport { UpdateAll } from './update-templates.js';\n\nlet importedTemplating = new WeakMap();\nlet currentModule = {id: null};\nconst SourceModule = Symbol();\n\nfunction patchTemplate(Template) {\n  const oldRegisterHelper = Template.registerHelper;\n  Template.registerHelper = function (name, func) {\n    func[SourceModule] = currentModule.id;\n    oldRegisterHelper(name, func);\n  }\n\n  const oldOnCreated = Template.prototype.onCreated;\n  Template.prototype.onCreated = function (cb) {\n    if (cb) {\n      cb[SourceModule] = currentModule.id;\n    }\n\n    return oldOnCreated.call(this, cb);\n  }\n\n  const oldOnRendered = Template.prototype.onRendered;\n  Template.prototype.onRendered = function (cb) {\n    if (cb) {\n      cb[SourceModule] = currentModule.id;\n    }\n\n    return oldOnRendered.call(this, cb);\n  }\n\n  const oldOnDestroyed = Template.prototype.onDestroyed;\n  Template.prototype.onDestroyed = function (cb) {\n    if (cb) {\n      cb[SourceModule] = currentModule.id;\n    }\n\n    return oldOnDestroyed.call(this, cb);\n  }\n\n  const oldHelpers = Template.prototype.helpers;\n  Template.prototype.helpers = function (dict) {\n    if (typeof dict === 'object') {\n      for (var k in dict) {\n        if (dict[k]) {\n          dict[k][SourceModule] = currentModule.id;\n        }\n      }\n    }\n\n    return oldHelpers.call(this, dict);\n  }\n\n  const oldEvents = Template.prototype.events;\n  Template.prototype.events = function (eventMap) {\n    const result = oldEvents.call(this, eventMap);\n    this.__eventMaps[this.__eventMaps.length - 1][SourceModule] = currentModule.id;\n    return result;\n  }\n}\n\nfunction cleanTemplate(template, moduleId) {\n  let usedModule = false\n  if (!template || !Blaze.isTemplate(template)) {\n    return usedModule;\n  }\n\n  function cleanArray(array) {\n    for (let i = array.length - 1; i >= 0; i--) {\n      let item = array[i];\n      if (item && item[SourceModule] === moduleId) {\n        usedModule = true\n        array.splice(i, 1);\n      }\n    }\n  }\n\n  cleanArray(template._callbacks.created);\n  cleanArray(template._callbacks.rendered);\n  cleanArray(template._callbacks.destroyed);\n  cleanArray(template.__eventMaps);\n\n  Object.keys(template.__helpers).forEach(key => {\n    if (template.__helpers[key] && template.__helpers[key][SourceModule] === moduleId) {\n      usedModule = true\n      delete template.__helpers[key];\n    }\n  });\n\n  return usedModule\n}\n\nfunction shouldAccept(module) {\n  if (!importedTemplating.get(module)) {\n    return false;\n  }\n  if (!module.exports) {\n    return true;\n  }\n\n  return Object.keys(module.exports).filter(key => key !== '__esModule').length === 0;\n}\n\nif (module.hot) {\n  patchTemplate(Blaze.Template);\n  module.hot.onRequire({\n    before(module) {\n      if (module.id === '/node_modules/meteor/blaze.js' || module.id === '/node_modules/meteor/templating.js') {\n        importedTemplating.set(currentModule, true);\n      }\n\n      let previousModule = currentModule;\n      currentModule = module;\n      return previousModule;\n    },\n    after(module, previousModule) {\n      if (shouldAccept(module)) {\n        module.hot.accept();\n        module.hot.dispose(() => {\n          Object.keys(Templates).forEach(templateName => {\n            let template = Templates[templateName]\n            let usedByModule = cleanTemplate(template, module.id);\n            if (usedByModule) {\n              Template._applyHmrChanges(templateName);\n            }\n          });\n\n          Object.values(Blaze._globalHelpers).forEach(helper => {\n            if (helper && helper[SourceModule] === module.id) {\n              Template._applyHmrChanges(UpdateAll);\n            }\n          });\n        });\n      }\n      currentModule = previousModule\n    }\n  });\n}\n","export const UpdateAll = Symbol('update all templates')\n\nlet renderedTemplates = {};\nlet overrideTemplateContentBlock = null;\nlet overrideTemplateElseBlock = null;\n\nconst oldConstructView = Template.prototype.constructView;\n\nTemplate.prototype.constructView = function () {\n  let view = oldConstructView.apply(this, arguments);\n  let templateName = this.viewName;\n\n  view.onViewCreated(function () {\n    renderedTemplates[templateName] = renderedTemplates[templateName] || [];\n    renderedTemplates[templateName].push(view);\n  });\n\n  view.onViewDestroyed(function () {\n    const index = renderedTemplates[templateName].indexOf(view);\n    if (index > -1) {\n      renderedTemplates[templateName].splice(index, 1);\n    }\n  });\n\n  if (overrideTemplateContentBlock) {\n    view.templateContentBlock = overrideTemplateContentBlock;\n    overrideTemplateContentBlock = null;\n  }\n\n  if (overrideTemplateElseBlock) {\n    view.templateElseBlock = overrideTemplateElseBlock;\n    overrideTemplateElseBlock = null;\n  }\n\n  return view;\n}\n\nlet updateRootViews = Template._applyHmrChanges;\n\nlet timeout = null;\nlet lastUpdateFailed = false;\nlet modifiedTemplates = new Set();\nlet templateViewPrefix = 'Template.';\n\n// Overrides the default _applyHmrChanges with one that updates the specific\n// views for modified templates instead of updating everything.\nTemplate._applyHmrChanges = function (templateName = UpdateAll) {\n  if (templateName === UpdateAll || lastUpdateFailed) {\n    lastUpdateFailed = false;\n    clearTimeout(timeout);\n    updateRootViews();\n    return;\n  } else {\n    modifiedTemplates.add(templateName);\n  }\n\n  if (timeout) {\n    return;\n  }\n\n  timeout = setTimeout(() => {\n    for (var i = 0; i < Template.__pendingReplacement.length; i++) {\n      delete Template[Template.__pendingReplacement[i]]\n    }\n\n    Template.__pendingReplacement = [];\n\n    timeout = null;\n    modifiedTemplates.forEach(templateName => {\n      modifiedTemplates.delete(templateName);\n      let viewName = templateName;\n\n      if (!(viewName in renderedTemplates)) {\n        viewName = templateViewPrefix + viewName;\n      } else {\n        console.error('[Blaze HMR] Error: view name does not start with Template');\n        return;\n      }\n\n      if (!(viewName in renderedTemplates)) {\n        return;\n      }\n\n      let views = renderedTemplates[viewName];\n      renderedTemplates[viewName] = [];\n      while (views.length > 0) {\n        let view = views.pop();\n\n        // find first parent template that isn't a content block\n        while (!view.template || view.templateContentBlock || view.templateElseBlock) {\n          if (!view.parentView) {\n            console.log('[Blaze HMR] Unable to update template', viewName);\n            return;\n          }\n\n          view = view.parentView;\n        }\n\n        if (!view.isRendered) {\n          continue;\n        }\n\n        // TODO: this can be removed if we don't update a view, and then update\n        // one of its children (we only need to update the parent).\n        Package.tracker.Tracker.flush();\n\n        let parent = view.parentView;\n        let parentElement = view._domrange.parentElement;\n        let next = view._domrange.lastNode().nextSibling;\n        let nextComment = null;\n\n        if (!next) {\n          // percolate:momentum requires a next node to show the new nodes\n          next = nextComment = document.createComment('Blaze HMR Placeholder');\n          parentElement.insertBefore(nextComment, null);\n        }\n\n        if (!parent) {\n          // TODO: we only need to update a single root view\n          return updateRootViews();\n        }\n\n        if (view.templateContentBlock) {\n          overrideTemplateContentBlock = view.templateContentBlock;\n        }\n        if (view.templateElseBlock) {\n          overrideTemplateElseBlock = view.templateElseBlock;\n        }\n\n        // Since there is a parent range, Blaze will not automatically\n        // detach the dom range.\n        view._domrange.detach();\n        view._domrange.destroy();\n        let newView;\n\n        try {\n          newView = Blaze.render(\n            Template[view.template.viewName.slice('Template.'.length)],\n            parentElement,\n            next,\n            parent\n          );\n        } catch (error) {\n          console.log('[Blaze HMR] Error re-rending template:');\n          console.error(error);\n          lastUpdateFailed = true;\n        }\n\n        let index = parent._domrange.members.findIndex(member => {\n          return member && member.view === view;\n        });\n        if (newView) {\n          parent._domrange.members.splice(index, 1, newView._domrange);\n        } else {\n          parent._domrange.members.splice(index, 1);\n        }\n\n        if (nextComment) {\n          parentElement.removeChild(nextComment);\n        }\n      }\n    });\n  });\n}\n"]}}]